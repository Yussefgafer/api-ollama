# .github/workflows/create_html.yml
name: Create and Commit HTML

on:
  workflow_dispatch:
    inputs:
      filename:
        description: 'اسم ملف HTML (مثال: index.html)'
        required: true
        default: 'index.html'
      content:
        description: 'محتوى ملف HTML'
        required: true
        default: '<!DOCTYPE html><html><head><title>My Page</title></head><body><h1>Hello GitHub Actions!</h1></body></html>'
      commit_message:
        description: 'رسالة الالتزام (Commit Message)'
        required: true
        default: 'Add/Update HTML file via GitHub Actions'
      branch_name:
        description: 'اسم الفرع للرفع إليه (مثال: main)'
        required: true
        default: 'main'

jobs:
  build:
    runs-on: ubuntu-latest
    # *** أضف هذا الجزء الجديد هنا ***
    permissions:
      contents: write # امنح أذونات الكتابة على محتوى المستودع

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }} 

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install dependencies (if any for Python script)
        run: |
          python -m pip install --upgrade pip
          # pip install requests # إذا كان السكريبت يحتاج إليها

      - name: Run Python script to create and commit file
        env:
          TOKEN: ${{ secrets.GH_TOKEN }} 
        run: |
          python create_and_commit.py \
            "${{ github.event.inputs.filename }}" \
            "${{ github.event.inputs.content }}" \
            "${{ github.event.inputs.commit_message }}" \
            "${{ github.event.inputs.branch_name }}"