# Dockerfile

# استخدم صورة Node.js أساسية. اختر الإصدار الذي تفضله.
# `alpine` خيار جيد للحاويات الصغيرة والخفيفة.
FROM node:20-alpine

# تعيين دليل العمل داخل الحاوية
WORKDIR /app

# نسخ ملفات package.json و package-lock.json (إن وجد)
# هذه الخطوة تستفيد من ميزة التخزين المؤقت لـ Docker
# إذا لم تتغير ملفات التبعيات، فلن يتم إعادة تثبيتها في كل مرة
COPY package*.json ./

# تثبيت تبعيات Node.js
# `--omit=dev` لتجنب تثبيت تبعيات التطوير في بيئة الإنتاج
RUN npm install --omit=dev

# نسخ باقي كود التطبيق إلى دليل العمل
COPY . .

# تعيين المنفذ الذي يستمع إليه التطبيق داخل الحاوية
# هذا لا ينشر المنفذ خارج الحاوية، بل يوثقه فقط
EXPOSE 3000

# الأمر الذي سيتم تنفيذه عند بدء تشغيل الحاوية
# "npm start" سيعمل بناءً على السكريبت المعرف في package.json
CMD [ "npm", "start" ]